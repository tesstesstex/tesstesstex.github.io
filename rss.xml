<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[ä¸€èº«ä¸Šã®éƒ½åˆ]]></title><description><![CDATA[ä½œã£ãŸã‚‚ã®ã‹ã‚‰èº«ã®ä¸Šè©±ã¾ã§]]></description><link>https://tesstesstex.vercel.app</link><generator>GatsbyJS</generator><lastBuildDate>Sat, 12 Jun 2021 04:45:18 GMT</lastBuildDate><item><title><![CDATA[YouTube Data API ã§ç™»éŒ²æ¸ˆã¿ãƒãƒ£ãƒ³ãƒãƒ«ã®ä¸­ã‹ã‚‰ãƒ©ã‚¤ãƒ–é…ä¿¡ä¸­ã®ã‚‚ã®ã ã‘å–å¾—ã—ã‚ˆã†ã¨ã—ãŸãŒQuota ã®ä¸Šé™ã«å¼•ã£ã‹ã‹ã£ãŸ]]></title><description><![CDATA[YouTube Data API ã§ä½•ã‹ã‚’ã¤ãã‚‹ã«ã¯Quota åˆ¶é™ã®ã›ã„ã§å®Ÿç”¨çš„ãªã‚‚ã®ã¯é›£ã—ã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚]]></description><link>https://tesstesstex.vercel.appmvs_aydhbjt9</link><guid isPermaLink="false">https://tesstesstex.vercel.appmvs_aydhbjt9</guid><pubDate>Sun, 30 May 2021 11:10:32 GMT</pubDate><content:encoded>YouTube é…ä¿¡é–‹å§‹ã®é€šçŸ¥ã¯Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã®ãƒ¡ãƒ¼ãƒ«ã‹ã€ã‚¹ãƒãƒ›ã¸ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—é€šçŸ¥ã—ã‹ãªã„ã®ã§ã€è‡ªåˆ†ã§API å©ã„ã¦Discord ã¨ã‹ã«é€šçŸ¥é£›ã°ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ã‹ã¨æ€ã„ã¡ã‚‡ã£ã¨ã—ãŸãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚Šã¾ã—ãŸã€‚  


  
ãŒã€ä¸€ã¤å•é¡ŒãŒã‚ã‚ŠGCP ã®YouTube Data API ã¯ä¸€æ—¥10,000 Queries ã¨ã„ã†Quota(å‰²å½“)ä¸Šé™ãŒæ±ºã‚ã‚‰ã‚Œã¦ãŠã‚Šã€ã•ã‚‰ã«ä½¿ç”¨ã™ã‚‹API ã«ã‚ˆã£ã¦Queries ã®ä½¿ç”¨é‡ãŒå®šã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚  
Quota ã«ã¤ã„ã¦ã¯[å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developers.google.com/youtube/v3/determine_quota_cost)ã‚’ã”ç¢ºèªãã ã•ã„ã€‚  
  


ä¾‹ã‚’æŒ™ã’ã‚‹ã¨ã€  
ãƒãƒ£ãƒ³ãƒãƒ«ç™»éŒ²ã«é–¢ã™ã‚‹API ã§ã‚ã‚‹`subscriptions.list` ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯cost ã¯ &lt;b&gt;&quot;1&quot;&lt;/b&gt; ã§ã™ãŒã€   
å‹•ç”»ã‚’æ¤œç´¢ã™ã‚‹`search.list` ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯cost ã¯ &lt;b&gt;&quot;50&quot;&lt;/b&gt; ã‚‚å¿…è¦ã§ã™ã€‚  
  
  

ä»Šå›ã‚„ã‚ŠãŸã‹ã£ãŸã“ã¨ã¯æµã‚Œã¨ã—ã¦ã€  

1. è‡ªåˆ†ã®ç™»éŒ²ãƒãƒ£ãƒ³ãƒãƒ«ã®ID ã‚’å–å¾—ã™ã‚‹  
2. å„ãƒãƒ£ãƒ³ãƒãƒ«ã®é…ä¿¡ä¸­ã®é…ä¿¡ãŒã‚ã‚Œã°ãã‚Œã‚’è¿”ã™  
3. ãã‚Œã‚’Discord ã¨ã‹ã§5åˆ†ãŠã(é…ä¿¡é–‹å§‹ã¯å¤§æŠµã‚­ãƒªã®è‰¯ã„æ™‚é–“ãªã®ã§)ã«é€šçŸ¥ã™ã‚‹  

ã£ã¦æ„Ÿã˜ãªã‚“ã§ã™ãŒã€YouTube Data API ã§ã¯é…ä¿¡ä¸­ã‹ã©ã†ã‹ã®æƒ…å ±ã¯ `videos` ã¾ãŸã¯ `search` ãƒªã‚½ãƒ¼ã‚¹ã§ã—ã‹å–å¾—ã§ãã¾ã›ã‚“ã€‚   
`videos` ã«é–¢ã—ã¦ã¯Channel ID ã‹ã‚‰ã¯å–å¾—ã§ããšã€`search` ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã—ã‹ãªã„ã®ã§ã™ãŒã€  
ç™»éŒ²ãƒãƒ£ãƒ³ãƒãƒ«ãŒ50ã ã£ãŸå ´åˆã€`search` ã®ã‚³ã‚¹ãƒˆ 50 Ã— 50 ã§2,500 Queries ã‚’æ¶ˆè²»ã—ã¦ã—ã¾ã†ã®ã§èª²é‡‘ã™ã‚‹ä»–æ–¹æ³•ãŒãªã„ã‚ˆã†ã§ã™ã€‚  
Quota ä¸Šé™ã®é–‹æ”¾ã«é–¢ã—ã¦ã¯[å€‹äººã ã¨é›£ã—ã„ã¿ãŸã„](https://stackoverflow.com/questions/61281991/applying-for-additional-quota-for-youtube-api-as-an-individual-without-business/62686472#62686472)ãªã®ã§ã€ç™½æ——ã§ã™ã€‚  


### ä¸€å¿œä½œã£ãŸã‚‚ã®ã¯ã“ã¡ã‚‰  
[tesstesstex/stream_now](https://github.com/tesstesstex/stream_now)


</content:encoded></item><item><title><![CDATA[ç´ äººã‹ã‚‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ãªã£ãŸçµŒç·¯]]></title><description><![CDATA[çµŒç·¯ã¾ã¨ã‚]]></description><link>https://tesstesstex.vercel.appW3wr23VhUGYJ</link><guid isPermaLink="false">https://tesstesstex.vercel.appW3wr23VhUGYJ</guid><pubDate>Tue, 30 Mar 2021 15:00:00 GMT</pubDate><content:encoded>åº¦ã€…è©±é¡Œã«ãªã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚¹ã‚¯ãƒ¼ãƒ«ãŒæœ€è¿‘ã¾ãŸè³‘ã‚ã£ã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã€  
å‚è€ƒã¾ã§ã«è‡ªåˆ†ãŒç´ äºº(ã“ã“ã§ã¯éæƒ…å ±ç³»å‡ºèº«ã¨ã„ã†æ„å‘³ã§ä½¿ã£ã¦ã„ã¾ã™)ã‹ã‚‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ­´6 å¹´ç›®ã«ãªã‚‹ã¾ã§ã®çµŒç·¯ã‚’æ›¸ã„ã¦ãŠã“ã†ã¨æ€ã„ã¾ã™ã€‚  

### å¤§å­¦
åœ°æ–¹å›½ç«‹å¤§ã®ç†ç³»å­¦éƒ¨åœ¨å­¦ä¸­ã«ã€è¶£å‘³ã§Web é–‹ç™ºã‚’å°‘ã€…ã‹ã˜ã£ãŸã‚Šã€ç ”ç©¶ã§ã®è¨ˆç®—ãªã©ã®è‡ªå‹•åŒ–ã«Python, VBA ã‚’ã™ã“ãƒ¼ã—ä½¿ã£ãŸã‚Šã—ã¦ã„ã¾ã—ãŸã€‚  
B1 ã®ã“ã‚ã€ä¾‹ã«ã‚‚ã‚ŒãšPython ã®ç’°å¢ƒæ§‹ç¯‰ã«èº“ã„ã¦ã„ãŸè¨˜æ†¶ãŒã‚ã‚Šã¾ã™ã€‚  

### å°±è·
B4 ã®é…ã„æ™‚æœŸã«å°±æ´»ã‚’å§‹ã‚ã¦ã€å­¦éƒ¨ã¨å¤šå°‘é–¢é€£ã‚‚ã‚ã£ãŸæ¥­ç¨®ã®åœ°æ–¹ä¸­å°ãƒ¡ãƒ¼ã‚«ãƒ¼ã«å°±è·ã—ã¾ã—ãŸã€‚  
1 å¹´ç›®ã¯æ–‡å­—é€šã‚Šã®åœŸæ–¹ã®éƒ¨é–€ã«é…å±ã•ã‚Œã€ã‚¶ï½¥ãƒ–ãƒ«ãƒ¼ã‚«ãƒ©ãƒ¼ã€ã‚ã‚ã“ã‚ŒãŒ3K ã‹ã€ã¨ã„ã†æ„Ÿã˜ã®æœŸé–“ã‚’é€ã‚Šã¾ã—ãŸã€‚  
æ™©å¤ã€œåˆç§‹ã”ã‚ã«ã¯è‚‰ä½“çš„ã«ã‚‚ç²¾ç¥çš„ã«ã‚‚é™ç•ŒãŒè¿‘ã‹ã£ãŸã®ã§ã€äººäº‹éƒ¨é•·ã«ç•°å‹•ã‚’ç›´è«‡åˆ¤(å½“ç„¶ãã®æ®µéšã§ã¯å—ã‘å…¥ã‚Œã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸãŒ)ã™ã‚‹ãªã©ã—ã¦ã„ã¾ã—ãŸã€‚  
æ¥­å‹™ã§ã¯ã‚‚ã¨ã‚‚ã¨åŠ¹ç‡å¨ã ã£ãŸã‚Šé¢å€’ãã•ãŒã‚Šã ã£ãŸãŸã‚ã«ã€æ›¸é¡ä½œæˆã‚’VBA ã§è‡ªå‹•åŒ–ã—ã¦å…¨ç¤¾ã«å°å…¥ã•ã‚ŒãŸã‚Šã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã§ã¯jQuery ã‚’ä½¿ã£ãŸWeb ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦éŠã‚“ã§ã¿ãŸã‚Šã‚‚ã—ã¦ã„ã¾ã—ãŸã€‚  

ï½¢ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§æ¥­å‹™æ”¹å–„ã¨ã‹ã™ã‚‹ã®æ¥½ã—ã„ãªãƒ¼ï½£ã¨æ€ã£ã¦2 å¹´ç›®ã«ãªã‚‹ç›´å‰ã®ç•°å‹•å¸Œæœ›èª¿æŸ»ã§ç¬¬ä¸€å¿—æœ›ã«ã‚·ã‚¹ãƒ†ãƒ éƒ¨é–€ã¨å›ç­”ã—ãŸã¨ã“ã‚ã€ã‚·ã‚¹ãƒ†ãƒ éƒ¨é–€ã®äººå“¡ä¸è¶³ã‚‚ã‚ã‚Šç•°å‹•ãŒé€šã‚Šã¾ã—ãŸã€‚ã“ã“ãŒ **äººç”Ÿã®ã‚¿ãƒ¼ãƒ‹ãƒ³ã‚°ãƒã‚¤ãƒ³ãƒˆ** ã§ã—ãŸã€‚  

ç„¡äº‹ç¤¾å†…SE ã¸ã®è»¢èº«ã«æˆåŠŸã—ã¦ã€å¤ªå¤ã®ãƒ¡ã‚¤ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ã«æ‚ªæˆ¦è‹¦é—˜ã—ãŸã‚Šã€Vue.js ã‚’ä½¿ã£ã¦ç¤¾å†…ã®ãƒãƒ¼ã‚¿ãƒ«ã®é–‹ç™ºã‚’ã—ãŸã‚Šã€ã‚·ã‚§ãƒ«ã‚„ã‚‰Python ã§è‡ªå‹•åŒ–ã‚’ã—ãŸã‚Šã€ã‚ªãƒ³ãƒ—ãƒ¬ã®ã‚µãƒ¼ãƒãƒ¼ã‚„ãƒ«ãƒ¼ã‚¿ãƒ¼ã®ç®¡ç†ã‚’ã—ãŸã‚Šã¨ã„ã‚ã„ã‚ãªçµŒé¨“ã‚’ç©ã‚€ã“ã¨ãŒã§ãã¾ã—ãŸã€‚3 å¹´ç›®ã«ãªã‚‹ã“ã‚ã«ã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã§ã—ã‚‡ã¼ã„èº«å†…å‘ã‘Web ã‚¢ãƒ—ãƒªã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¦å–œã‚“ã§ã„ã¾ã—ãŸã€‚  

### è»¢è·
æ¥­å‹™çš„ã«åŒºåˆ‡ã‚ŠãŒã¤ã„ãŸã“ã¨ã¨ã€è‡ªåˆ†ã®å¸‚å ´ä¾¡å€¤ã‚’çŸ¥ã£ã¦ã¿ãŸã‹ã£ãŸã“ã¨ã‚‚ã‚ã‚Šã€è»¢è·ã‚’æ±ºæ„ã—ã¾ã—ãŸã€‚  
ä½•ç¤¾ã‹é¢æ¥ã‚’å—ã‘ãŸã¨ã“ã‚ã€æ„å¤–ã«ã‚‚ã©ã“ã‚‚å¥½åå¿œã‚’é ‚ã‘ã¦å¬‰ã—ã‹ã£ãŸã®ã‚’è¦šãˆã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€Œç‹¬å­¦ãŒã§ãã€å®Ÿå‹™çµŒé¨“ãŒã‚ã‚Šã€éƒ¨ç½²ç•°å‹•ã‚’è«‡åˆ¤ã—ãŸã‚Šè‡ªä½œãƒ„ãƒ¼ãƒ«å…¨ç¤¾å±•é–‹ã™ã‚‹ã‚ˆã†ãªè¡Œå‹•åŠ›ï¼ŸãŒã‚ã‚‹ã€ã¨ã„ã£ãŸçµŒæ­´ã‚’è©•ä¾¡é ‚ã„ãŸã‚ˆã†ã§ã—ãŸã€‚  

ã“ã†ã—ã¦ç¾åœ¨ã¯ä¸»ã«ç¤¾å†…å‘ã‘ã®Web ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹ç™ºã«å‹¤ã—ã‚“ã§ã„ã‚‹ã‚ã‘ã§ã™ãŒã€ã‚ã‚ŠãŒãŸã„ã“ã¨ã«ãã“ãã“è²°ãˆã¦ã¼ã¡ã¼ã¡ä¸è‡ªç”±ã®ãªã„ç”Ÿæ´»ã‚’é€ã‚Œã¦ã„ã¾ã™ã€‚  

### æ€ã†ã“ã¨
é ­ã§ã€Œå‚è€ƒã¾ã§ã«ã€ã¨æ›¸ãã¾ã—ãŸãŒã€è‡ªåˆ†ã¯ã‹ãªã‚Šé‹ãŒè‰¯ã‹ã£ãŸæ–¹ã ã¨æ€ã£ã¦ã„ã‚‹ã®ã§ã€æ­£ç›´å‚è€ƒã«ãªã‚‹ã‹ã¯æ€ªã—ã„ã§ã™ã€‚  
ã“ã‚“ãªçµŒæ­´ã®äººé–“ã‹ã‚‰ã“ã‚Œã‹ã‚‰ã‚¹ã‚¯ãƒ¼ãƒ«ã«é€šãŠã†ã‹è¿·ã£ã¦ã„ã‚‹æ–¹ã«è¨€ãˆã‚‹ã“ã¨ãŒã‚ã‚‹ã¨ã™ã‚Œã°ã€  

- ã‚¹ã‚¯ãƒ¼ãƒ«è¡Œããªã‚‰é¸ã¶ã¹ã  
è‡ªåˆ†ã¯ã‚¹ã‚¯ãƒ¼ãƒ«ã«è¡Œã£ãŸã“ã¨ã¯ãªã„ã®ã§è©³ã—ãã¯ã‚ã‹ã‚‰ãªã„ã®ã§ã‚¢ãƒ¬ã§ã™ãŒã€  
å­¦ã¶è¨€èªã¨æœ€çµ‚çš„ã«ã©ã“ã¾ã§ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã®ã‹ã€ã¿ãŸã„ãªã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ãŒè©³ã—ããªã•ãã†ãªã¨ã“ã‚ã¯ã‚ˆã‚ã—ããªã„ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã­ã€‚  
ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®å‹äººã¨ã‹ã„ã‚Œã°ã€å¤§ä¸ˆå¤«ãã†ã‹èã„ã¦ã¿ã¦ã‚‚ã„ã„ã‹ã‚‚ï¼Ÿ  

- ã‚¹ã‚¯ãƒ¼ãƒ«ã«è¡Œã‹ãªãã¦ã‚‚ç‹¬å­¦ã¯ã§ãã‚‹ï¼  
ä»Šã©ãã¯ã©ã‚“ã©ã‚“ä¾¿åˆ©ã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã€PC ã‚„ã‚¹ãƒãƒ›ã§å‹‰å¼·ã§ãã‚‹æ‰‹æ®µãŒè±Šå¯Œã«ã‚ã‚Šã¾ã™ã€‚ãã®æ•™æã®è‰¯ã—æ‚ªã—ã‚’è¦‹åˆ†ã‘ã‚‹ã®ã¯ã‚¹ã‚¯ãƒ¼ãƒ«ã¨åŒã˜ãé›£ã—ã„ã¨ã¯æ€ã„ã¾ã™ãŒã€Web ä¸Šã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã ã¨ä¸€éƒ¨ã¾ãŸã¯å…¨éƒ¨ãŒç„¡æ–™ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚‚å¤šã„ã§ã™ã€‚  
ãªã®ã§ãã®ç„¡æ–™åˆ†ã‚’ã¾ãšä¸€å›ã‚„ã£ã¦ã¿ã¦ã€èª²é‡‘ã—ã¦ãã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç¶šã‘ã‚‹ã‹è€ƒãˆã‚Œã°è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚  
âš ï¸ãŸã å§‹ã‚ã‚‹ã«ã‚ãŸã£ã¦è‰²ã€…ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚‚ã®ã¯ã€å¾Œã«é•ã†æ•™æã‚’é¸ã‚“ã ã¨ãã«ç«¶åˆãŒèµ·ãã¦é¢å€’ãªã“ã¨ãŒèµ·ãã‚‹å¯èƒ½æ€§ãŒãªãã«ã—ã‚‚ã‚ã‚‰ãšã§ã™ã€‚æ³¨æ„ã€‚  
æœ€è¿‘ã¯Web ä¸Šã§1 ã‹ã‚‰10 ã¾ã§å®Œçµã™ã‚‹(ã¤ã¾ã‚Šã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ã‹ã„ã‚‰ãªã„)ã‚µãƒ¼ãƒ“ã‚¹ã‚‚ã‚ã‚‹ã¯ãšãªã®ã§ãã£ã¡ã®æ–¹ãŒãŠã™ã™ã‚ã‹ã‚‚ã€‚  

- GAS(Google Apps Script) ã‚„VBA ã‚’è§¦ã£ã¦ã¿ã‚ˆã†  
Excel ã‚„Google Spreadsheet ã‚’ä»•äº‹ã§è§¦ã‚Œã‚‹æ©Ÿä¼šã‚‚å¤šã„ã¨æ€ã„ã¾ã™ã€‚ãã†ã„ã†æ„å‘³ã§çµæ§‹ã¨ã£ã¤ãã‚„ã™ã„ã‹ã¨æ€ã†ã®ã§ã€Excel VBA ã‚„GAS ã‚’è§¦ã£ã¦ã¿ã‚‹ã¨è‰¯ã„ã‹ã‚‚ã§ã™ã€‚  
é¡ŒæãŒãªã„ã¨ãªã‹ãªã‹è¦šãˆã‚‹ã®ã¯é›£ã—ã„ã‚‚ã®ã§ã™ãŒã€ãµã ã‚“Excel ã§ãƒ‡ãƒ¼ã‚¿ã‚’ã„ã˜ãã£ã¦ã„ã‚‹ã¨ã€ï½¢ã“ã®å˜ç´”ä½œæ¥­ã‚ã‚“ã©ãã•ã„ãªãƒ¼ï½£ã¨ã‹ï½¢ã‚ˆãã‚±ã‚¢ãƒ¬ã‚¹ãƒŸã‚¹ã—ã¡ã‚ƒã†ãªãƒ¼ï½£ã¨ã‹ã‚ã£ãŸã‚Šã—ã¾ã›ã‚“ã‹ï¼Ÿãã†ã„ã†ã‚‚ã®ãªã‚“ã¦ã¾ã•ã«ã†ã£ã¦ã¤ã‘ã®é¡Œæã§ã™ã€‚  
æ„å¤–ã¨ä¸–ã®ä¸­ã«ã¯éæƒ…å ±ç³»å‡ºèº«ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚‚å¤šã„ã§ã™ãŒã€ãã®ä¸­ã§ã‚‚æœ€åˆã«è§¦ã£ãŸã®ã¯VBA ã¨è¨€ã£ã¦ã„ãŸæ–¹ã¯è¤‡æ•°å‡ºä¼šã£ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã—ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚  
GAS ã¯æ–‡æ³•çš„ã«ã¯JavaScript ã‚„TypeScript ã¨ã»ã¼åŒã˜ãªã®ã§ã€Web ç³»ã®é–‹ç™ºã«èˆˆå‘³ãŒã‚ã‚‹æ–¹ã¯ã“ã¡ã‚‰ã®æ–¹ã‚‚ãŠã™ã™ã‚ã€‚

- ã‚¹ã‚¯ãƒ¼ãƒ«è¡ŒããŸã‚ã«ä»•äº‹ã‚’è¾ã‚ã‚‹ã®ã¯ãƒªã‚¹ã‚­ãƒ¼ï¼  
æœ¬æ°—ã§ã‚¹ã‚¯ãƒ¼ãƒ«ã®ãŸã‚ã«ä»•äº‹ã‚„ã‚ã‚ˆã†ã¨æ€ã£ã¦ã„ã‚‹äººã¯ã€ä¸€æ—¦å†·é™ã«ãªã£ã¦ã€èª°ã‹ç›¸è«‡ã—ã¾ã—ã‚‡ã†ã€‚  
ç›¸è«‡ã§ãã‚‹å®¶æ—ã‚„å‹äººãŒã„ãªã„å ´åˆã¯è»¢è·ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ç™»éŒ²ã—ã¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ–¹ã¨ãŠè©±ã—ã™ã‚‹ã®ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚  

å‰ãã†ã«é•·ã€…ã¨èªã£ã¦ã—ã¾ã„ã¾ã—ãŸãŒã€ãã‚Œãã‚‰ã„ã§ã—ã‚‡ã†ã‹ğŸ¤”  
ãªã«ã‹ã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</content:encoded></item><item><title><![CDATA[Vue CLI ã§GoogleAppsScript ã‚¢ãƒ—ãƒª ã‚’ä½œæˆã™ã‚‹ã¾ã§]]></title><description><![CDATA[Vue CLI ã‚’ä½¿ç”¨ã—ãŸSPA ã‚’Webpack ã§ãªã‚“ã¨ã‹GAS ä¸Šã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹ã‚ˆã†ã«ãªã‚‰ãªã„ã‹ã‚„ã£ã¦ã¿ãŸ ]]></description><link>https://tesstesstex.vercel.appUZl-L_vYqclV</link><guid isPermaLink="false">https://tesstesstex.vercel.appUZl-L_vYqclV</guid><pubDate>Mon, 01 Feb 2021 19:10:32 GMT</pubDate><content:encoded># VueCLI4 ã§GoogleAppsScript ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹

GoogleAppsScript (ä»¥ä¸‹GAS) ã§ç°¡æ˜“ãªWeb ã‚µã‚¤ãƒˆã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒä½œæˆã§ãã‚‹ã®ã§ã™ãŒã€  
ãã‚Œã‚’VueCLI ã‚’ç”¨ã„ã¦ä½œæˆã—ã¦ã¿ã¾ã—ãŸã€‚  

## Vue CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Vue.js ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç°¡å˜ã«ä½œã‚‹ãŸã‚ã®CLI ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹Vue CLI ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚  
Vue CLI ã¯global install ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§æ³¨æ„ã€‚  

ãªãŠnpm ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯é©å®œèª­ã¿æ›¿ãˆã¦ãã ã•ã„ã€‚  
```
$ yarn global add @vue/cli @vue/cli-init
yarn global v1.22.10
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
success Installed &quot;@vue/cli@4.5.11&quot; with binaries:
      - vue
âœ¨  Done in 197.86s.

$ vue --version
@vue/cli 4.5.11
```
* vue ãŒå‹•ã‹ãªã„å ´åˆã¯ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã®ãƒ‘ã‚¹ãŒé€šã£ã¦ã„ãªã„ã¨æ€ã‚ã‚Œã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ã‚°ã‚°ã£ã¦ã¿ã¦ãã ã•ã„ã€‚  


## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã«ã™ã¹ã¦ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒå…¥ã‚Šã¾ã™ã€‚  

```
$ vue create &lt;appname&gt;
* ã“ã“ã§ã¯appname ã¯&quot;vue-gas-app&quot; ã¨ã—ã¾ã™ã€‚
** ãŠãã‚‰ãself singed certificate ã«é–¢ã™ã‚‹ã‚¨ãƒ©ãƒ¼ãŒç”Ÿã˜ã‚‹ã®ã§ã€Global Protect ã‚’ä¸€æ™‚çš„ã«åˆ‡æ–­ã—ã¾ã—ã‚‡ã†ã€‚
*** çµ‚äº†å¾Œå†æ¥ç¶šã™ã‚‹ã®ã‚’å¿˜ã‚Œãšã«ã€‚
```

å®Ÿè¡Œå¾Œã€ä»¥ä¸‹ã®åˆæœŸè¨­å®šç”¨ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚Šã¾ã™ã€‚  
ä»Šå›ã¯è©¦ã—ã«Manual ã§è¨­å®šã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ 
```
Vue CLI v4.5.11
? Please pick a preset: (Use arrow keys)
  Default ([Vue 2] babel, eslint)
  Default (Vue 3 Preview) ([Vue 3] babel, eslint)
â¯Manually select features
```

```
? Check the features needed for your project: (Press &lt;space&gt; to select, &lt;a&gt; to toggle all, &lt;i&gt; to invert selection)
â¯â—‰ Choose Vue version
 â—‰ Babel
 â—¯ TypeScript
 â—¯ Progressive Web App (PWA) Support
 â—¯ Router
 â—¯ Vuex
 â—¯ CSS Pre-processors
 â—‰ Linter / Formatter
 â—¯ Unit Testing
 â—¯ E2E Testing
```

```
? Choose a version of Vue.js that you want to start the project with
â¯ 2.x
  3.x (Preview)
```

```
? Pick a linter / formatter config:
  ESLint with error prevention only
  ESLint + Airbnb config
  ESLint + Standard config
â¯ ESLint + Prettier
```

```
? Pick additional lint features: (Press &lt;space&gt; to select, &lt;a&gt; to toggle all, &lt;i&gt; to invert selection)
â¯â—‰ Lint on save
 â—¯ Lint and fix on commit
```

```
? Where do you prefer placing config for Babel, ESLint, etc.? (Use arrow keys)
â¯ In dedicated config files
  In package.json
```

```
? Save this as a preset for future projects? (y/N) n
```

```
? Pick the package manager to use when installing dependencies: (Use arrow keys)
â¯ Use Yarn
  Use NPM
```

```
âœ¨  Creating project in /Users/user/work/vue-gas-app.
ğŸ—ƒ  Initializing git repository...
âš™ï¸  Installing CLI plugins. This might take a while...

yarn install v1.22.10
info No lockfile found.
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
success Saved lockfile.
âœ¨  Done in 123.97s.
ğŸš€  Invoking generators...
ğŸ“¦  Installing additional dependencies...

yarn install v1.22.10
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...

success Saved lockfile.
âœ¨  Done in 20.69s.
âš“  Running completion hooks...

ğŸ“„  Generating README.md...

ğŸ‰  Successfully created project vue-gas-app.
ğŸ‘‰  Get started with the following commands:

 $ cd vue-gas-app
 $ yarn serve
```

ä»Šå›ã¯VueCLI ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ“ãƒ¥ãƒ¼ã®ã¿ã®ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ã®ã§ã€Vue Router ã‚„Vuex ã¯ä½¿ç”¨ã—ãªã„ã‚‚ã®ã¨ã—ã¾ã™ã€‚    
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã‚‰è©¦ã—ã«ä¸€åº¦å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚    

```
$ cd vue-app-demo

$ yarn serve
```

## GoogleAppsScript ã®ç”¨æ„

ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰Google Apps Script API ã‚’ï½¢ã‚ªãƒ³ï½£ã«ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚  
https://script.google.com/u/1/home/usersettings  

GAS ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯clasp ã¨ã„ã†CUI ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã¨åŒæœŸã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚  

```
$ yarn global add @google/clasp

$ clasp login

$ clasp create vue-gas-app
? Create which script?
  standalone
  docs
  sheets
  slides
  forms
â¯ webapp
  api
```

```
Created new webapp script: https://script.google.com/d/&lt;id&gt;/edit
Warning: files in subfolder are not accounted for unless you set a &apos;.claspignore&apos; file.
Cloned 1 file.
â””â”€ appsscript.json
```

ã“ã“ã§æ–°ãŸã«appsscript.json ã¨.clasp.json ãŒä½œæˆã•ã‚Œã¾ã™ã€‚  
æœ€çµ‚çš„ã«GAS ã¸ã¯`clasp push` ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã§dist/ å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã®ã§ã™ãŒã€  
dist/ å†…ã«appsscript.json ã‚„Code.js ã‚’é…ç½®ã™ã‚‹ã“ã¨ã‚’é¿ã‘ã‚‹ãŸã‚ã«ã€gas/ ã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚  

```
$ mkdir gas

$ mv appsscript.json gas/

$ echo .clasp.json &gt;&gt; .gitignore
```

ã¾ãŸgas/ å†…ã«GAS ã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã¨ãªã‚‹Code.js ã‚’ä½œæˆã—ã¾ã™ã€‚  

```javascript
# Code.js
function doGet() {
  return getHtml()
}
function getHtml() {
  const html = HtmlService.createTemplateFromFile(&apos;index&apos;)
  return html
    .evaluate()
    .setTitle(&apos;vue-gas-app&apos;)
    .addMetaTag(&apos;viewport&apos;, &apos;width=device-width, initial-scale=1&apos;)
}
```

dist/ å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’GAS ã¸push ã™ã‚‹ãŸã‚ã«.clasp.json ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã™ã€‚  

```json
{
  &quot;scriptId&quot;:&quot;&lt;id&gt;&quot;,
  &quot;rootDir&quot;: &quot;dist&quot;
}
```

## ãƒ“ãƒ«ãƒ‰ã®è¨­å®š

ä½œæˆã—ãŸgas/ å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ“ãƒ«ãƒ‰ã®éš›ã«dist/ ã«ã‚³ãƒ”ãƒ¼ã—ã¦ãã‚Œã‚‹ã‚ˆã†ã«ã€webpack ã®è¨­å®šã‚’ã—ã¾ã™ã€‚  
VueCLI ã§ã¯å¾“æ¥ã®ã‚ˆã†ã«webpack.config.js ã«è¨­å®šã™ã‚‹ã®ã§ã¯ãªãã€vue.config.js å†…ã«è¨˜è¿°ã—ã¾ã™ã€‚  

```javascript
# vue.config.js
const CopyWebpackPlugin = require(&apos;copy-webpack-plugin&apos;)

module.exports = {
  configureWebpack: {
    plugins: [
      new CopyWebpackPlugin([
        {
          from: path.resolve(__dirname, &apos;./gas&apos;),
          ignore: [&apos;.*&apos;]
        }
      ])
    ]
  }
};
```

ã¾ãŸã€VueCLI ã®é€šå¸¸ã®ãƒãƒ³ãƒ‰ãƒ«ã§ã¯GAS ã§ã¯èª­ã¿è¾¼ã‚ãªã„å ´åˆãŒã‚ã‚‹ãŸã‚ã€ã™ã¹ã¦ã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã§ãƒãƒ³ãƒ‰ãƒ«ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚

```javascript
# vue.config.js
const path = require(&apos;path&apos;)
const CopyWebpackPlugin = require(&apos;copy-webpack-plugin&apos;)
const HtmlWebpackInlineSourcePlugin = require(&apos;html-webpack-inline-source-plugin&apos;)

module.exports = {
  publicPath: &apos;/public&apos;,
  chainWebpack: config =&gt; {
    config
      .plugin(&apos;html&apos;)
      .tap(args =&gt; {
        args[0].template = &apos;./public/index.html&apos;
        args[0].inlineSource = &apos;.(vue|js|css)&apos;
        return args
      })
  },
  configureWebpack: {
    plugins: [
      new HtmlWebpackInlineSourcePlugin(),
      new CopyWebpackPlugin([
        {
          from: path.resolve(__dirname, &apos;./gas&apos;),
          ignore: [&apos;.*&apos;]
        }
      ])
    ]
  }
};
```

## deploy

ã§ã¯å®Ÿéš›ã«ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚  

```
$ yarn build
```

ãƒ“ãƒ«ãƒ‰ã—ãŸã‚‚ã®ã‚’clasp push ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚  
ã¾ãŸã€ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œãªã„ã‚ˆã†ã«äº‹å‰ã«.claspignore ã‚’è¨­å®šã—ã¾ã™ã€‚  

```
/* .claspignore */
**/**
static/**
static/css/**
!appsscript.json
!Code.js
!index.html
```

```
$ clasp push
```

ã“ã‚Œã§GAS ã®ç”»é¢ã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚Œã°OKã§ã™ã€‚

## Appendix

### Linter ã¨Formatter

Linting rules ã«é–¢ã—ã¦ã¯å¥½ã¿ãŒåˆ†ã‹ã‚Œã¾ã™ãŒã€ã“ã“ã§ã¯æ¨™æº–çš„ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹Prettier ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã«ä½¿ç”¨ã—ã¾ã™ã€‚  
VueCLI ã‚’ä½¿ç”¨ã—ã¦ESLint + Prettier ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«ESLint ã¨Prettier ã§ç«¶åˆã™ã‚‹ãƒ«ãƒ¼ãƒ«ã‚’ã‚ªãƒ•ã«ã—ã¦ãã‚Œã‚‹`eslint-config-prettier` ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã®ã§ã€åŸºæœ¬çš„ã«ã¯è‡ªåˆ†ã§ç‰¹ã«ãƒ«ãƒ¼ãƒ«ã‚’ã„ã˜ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚  
ç§ã®å ´åˆã¯ .prettierrc.js ã«ã¦ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã®ã¿æœ‰åŠ¹ã«ã—ã¦ã‚ã‚Šã¾ã™ã€‚  

```javascript
# .prettierrc.js
module.exports = {
  singleQuote: true,
};
```
</content:encoded></item><item><title><![CDATA[Hangouts Chatã®é›¨é€šçŸ¥botã‚’çˆ†é€Ÿã§ä½œã‚‹]]></title><description><![CDATA[Google Chat (æ—§å: Hangouts Chat) ã®bot ã‚’ç°¡å˜ã«ä½œã‚‹æ–¹æ³•]]></description><link>https://tesstesstex.vercel.app2OsBWeOpgTBV</link><guid isPermaLink="false">https://tesstesstex.vercel.app2OsBWeOpgTBV</guid><pubDate>Thu, 26 Mar 2020 03:15:00 GMT</pubDate><content:encoded>**:warning:ã“ã®è¨˜äº‹ã¯2019/12/06 ã«Qiita ã«æŠ•ç¨¿ã—ãŸã‚‚ã®ã§ã™**

@murs313 ã•ã‚“ã®[Slackã®é›¨é€šçŸ¥botã‚’çˆ†é€Ÿã§ä½œã‚‹ã€ãƒ¡ãƒƒâ—â—ã€‘](https://qiita.com/murs13/items/abc2b124d53e2ed54a02)ã‚’èª­ã¿ã€
æ—©é€ŸåŒã˜ç‰©ã‚’ä½œã‚ã†ã¨æ€ã„ã¾ã—ãŸãŒã€å¼Šç¤¾ã¯SlackãŒä½¿ãˆã¾ã›ã‚“ã§ã—ãŸã€‚

ã¨ã„ã†ã‚ã‘ã§**Hangouts Chatç‰ˆ**é›¨é€šçŸ¥botã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚
GASã ã¨çœŸä¼¼ã—ã™ãã§ä½œã£ã¦ã¦ã¤ã¾ã‚‰ãªã„ã®ã§Pythonã¨cronã§å®Ÿè£…ã—ã¦ã¿ã¾ã—ãŸã€‚

â€» ãªãŠHangouts Chatã¯G Suiteã§ã®ã¿ä½¿ç”¨ã§ãã€å€‹äººã®Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã¯ç¾åœ¨ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚

# ã¤ãã£ãŸã‚‚ã®
ãƒ†ã‚¹ãƒˆã§é€ä¿¡ã—ã¦ã¿ãŸã‚‚ã®ãŒã“ã¡ã‚‰ã€‚
å®Ÿéš›ã¯æ™‚é–“ã‚’åˆã‚ã›ã¦17:00ã«é€ä¿¡ã•ã‚Œã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ã„ã¾ã™ã€‚
![IMG_0068.jpg](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/342105/da93ccdf-2a24-c9dc-4b94-eb48a3689152.jpeg)
Hangouts Chatã¯Markdownã£ã½ã„è¨˜æ³•ãŒä½¿ãˆã‚‹ã®ãŒè‰¯ã„ã§ã™ã­ã€‚
ï¼ˆç”»åƒã§ã¯å¼·èª¿è¡¨ç¤ºãŒã†ã¾ã„ã“ã¨ã„ã£ã¦ã¾ã›ã‚“ãŒâ€¦â€¦ï¼‰

# ã¤ã‹ã£ãŸã‚‚ã®
- **CentOS 8**  
  cronã§å®šæœŸå®Ÿè¡Œã—ã¾ã™ã€‚
- **Python 3.6.8**  
- **Hangouts Chat ã® incoming webhook**
- **[livedoorãŠå¤©æ°—API](http://weather.livedoor.com/weather_hacks/webservice)**

# Hangouts Chatã¸ã®POST
Hangouts Chat ã¯ incoming webhook ãŒä½¿ç”¨ã§ãã¾ã™ã€‚
@iitenkida7 ã•ã‚“ã® [[è¶…ç°¡å˜]Hangouts Chat ã® incoming webhooks ã‚’ä½¿ã£ã¦APIã‹ã‚‰ç°¡å˜ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æŠ•ç¨¿ã™ã‚‹](https://qiita.com/iitenkida7/items/3c8f9f8f6ee1e809558d)ã‚’å‚è€ƒã«ã•ã›ã¦é ‚ãã¾ã—ãŸã€‚

# Pythonã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
```python:weather.py
import requests

weather_url = &apos;http://weather.livedoor.com/forecast/webservice/json/v1?city=130010&apos; # Tokyo
resp = requests.get(weather_url)
data = resp.json()

# ä¸€éƒ¨ã¼ã‹ã—ã¦ã„ã¾ã™ãŒã‚³ãƒ”ãƒšã§ãŠk
webhook_url = &quot;https://chat.googleapis.com/v1/spaces/HOGEHOGE/messages?key={YOUR_KEY}&amp;token={YOUR_TOKEN}&quot; 

tomorrow_weather = data[&apos;forecasts&apos;][1]
telop = tomorrow_weather[&apos;telop&apos;]
max_temp = tomorrow_weather[&apos;temperature&apos;][&apos;max&apos;]
min_temp = tomorrow_weather[&apos;temperature&apos;][&apos;min&apos;]
image = tomorrow_weather[&apos;image&apos;][&apos;url&apos;]

text = &apos;&apos;
text += &apos;æ˜æ—¥ã®å¤©æ°—ã¯&apos;
text += &apos;*&apos; + telop + &apos;*&apos;
text += &apos;ã§ã™ã€‚\n&apos;
# ãªãœã‹maxã¨minãŒæ™‚ã€…å–å¾—ã§ããªã„
if max_temp is not None:
    text += &apos;æœ€é«˜æ°—æ¸©&apos;
    text += max_temp.get(&apos;celsius&apos;)
    text += &apos;â„ƒ&apos;
if min_temp is not None:
    text += &apos;/æœ€ä½æ°—æ¸©&apos;
    text += min_temp.get(&apos;celsius&apos;)
    text += &apos;â„ƒ\n&apos;
text += image

content = {&quot;text&quot;: text}
response = requests.post(webhook_url, json=content)
```

# cronã®è¨­å®š
cronã®è¨­å®šã¯[ã“ã¡ã‚‰](https://eng-entrance.com/linux-command-crontab)ãŒå‚è€ƒã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚

cronã®è¨­å®šã‚’è¡Œã†ã«ã¯```crontab -e```ã‚’å©ãã¾ã—ã‚‡ã†ã€‚

```sh
$ crontab -e
```

ã™ã‚‹ã¨Vimã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒé–‹ãã®ã§ã€å®Ÿè¡Œã™ã‚‹æ™‚é–“ã¨å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¾ã—ã‚‡ã†ã€‚
ä»Šå›ã¯ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›´ä¸‹ã«ç½®ã„ãŸã¨ã„ã†è¨­å®šã§ã™ã€‚

```vim
0 17 * * * python3 ~/weather.py
```

ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã—ã¦Vimã‚’é–‰ã˜ãŸæ™‚ã«```crontab: installing new crontab```ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°è¨­å®šå®Œäº†ã§ã™ã€‚

å‹•ä½œç¢ºèªã™ã‚‹å ´åˆã¯ã€å†åº¦```crontab -e```ã‚’é–‹ãã€

```vim
*/1 * * * * python3 ~/weather.py
```

ã®ã‚ˆã†ã«è¨˜è¿°ã™ã‚Œã°1åˆ†ãŠãã«ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

# æ„Ÿæƒ³
å‚è€ƒã«ã•ã›ã¦ã„ãŸã ã„ãŸãƒªãƒ³ã‚¯ãŒã‚ã‹ã‚Šã‚„ã™ã‹ã£ãŸã®ã§ç‰¹ã«è©°ã¾ã‚‹ã“ã¨ãªãè¨­å®šã§ãã¾ã—ãŸã€‚
</content:encoded></item><item><title><![CDATA[Flask ä½¿ã£ãŸAPI ã‚µãƒ¼ãƒãƒ¼ã®åŸºæœ¬]]></title><description><![CDATA[Flask ã§ç°¡å˜ãªAPI ã‚µãƒ¼ãƒãƒ¼ç«‹ã¦ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã¿ã‚‹]]></description><link>https://tesstesstex.vercel.appbsRqu6S68Br1</link><guid isPermaLink="false">https://tesstesstex.vercel.appbsRqu6S68Br1</guid><pubDate>Fri, 04 Oct 2019 03:00:00 GMT</pubDate><content:encoded>**:warning:ã“ã®è¨˜äº‹ã¯2019/10/04 ã«Qiita ã«æŠ•ç¨¿ã—ãŸã‚‚ã®ã§ã™**

# TL; DR

Flaskã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰APIã‚’å®Ÿè£…ã—ã€REST Clientã§å©ãã¾ã—ãŸã€‚

 - [ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(Github)](https://github.com/tesstesstex/API_TEST)

# ã¯ã˜ã‚ã«
ã“ã®è¨˜äº‹ã§ã¯Flaskã§ç°¡å˜ãªGETã®APIã‚’å®Ÿè£…ã™ã‚‹ã¨ã“ã‚ã‹ã‚‰ã€
å®Ÿéš›ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’POSTã™ã‚‹APIã‚’å®Ÿè£…ã™ã‚‹ã¨ã“ã‚ã¾ã§ã‚’ã€3 Stepsã§è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚
Flaskã«ã‚ã¾ã‚Šé¦´æŸ“ã¿ãŒç„¡ã„æ–¹ã‚‚è¶…ç°¡å˜ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰APIã§ãã‚‹ã‚ˆã†ã«ãªã‚Œã¾ã™ï¼ˆãã£ã¨ï¼‰ã€‚

## ç’°å¢ƒ
- Python 3.7
- Flask 1.1
- VSCode 1.38

&gt;ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
/
â”œ data/
â”œ \_\_init\_\_.py
â”œ api.py
â”œ call.http
â”œ face.png
â”” requirements.txt

# 1. APIã®å®Ÿè£…(JSONã®GET)

Flaskã§ã®APIã®å®Ÿè£…ãƒã‚¸ã§ç°¡å˜ã€‚ã‚„ã£ãŸãœã€‚

## 1-1. å®Ÿè£…

```python:api.py
from flask import Flask, jsonify

app = Flask(__name__)


@app.route(&apos;/api/item&apos;, methods=[&apos;GET&apos;])
def get_item():
   item = {&quot;item_name&quot;: &apos;hogehoge&apos;}

   return jsonify(item) 

if __name__ == &apos;__main__&apos;:
    app.run(debug=True)
```
ã“ã‚Œã ã‘ã€‚ã‚„ã£ãŸãœã€‚

## 1-2. å©ã

ã•ã£ããè©¦ã—ã«å©ã„ã¦ã¿ã‚ˆã†ï¼
......ã‚ã‚Œã‚ˆãè€ƒãˆãŸã‚‰ã‚ã‚“ã¾ã‚Šå©ãæ–¹çŸ¥ã‚‰ãªã„ãªï¼Ÿ(æƒ…å¼±)

### 1-2-0. REST Client

ã‚°ã‚°ã£ã¦ã¿ãŸã‚‰æ¬¡ã®è¨˜äº‹ã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚

- [VS Codeä¸Šã§HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã€VS Codeä¸Šã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ç¢ºèªã§ãã‚‹ã€ŒREST Clientã€æ‹¡å¼µã®ç´¹ä»‹](https://qiita.com/toshi0607/items/c4440d3fbfa72eac840c)

&gt;REST Client allows you to send HTTP request and view the response in Visual Studio Code directly.

VSCodeä¸Šã§ HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã§ãã‚‹ã¨ãªï¼Ÿä¾¿åˆ©ãã†ã€‚
æ—©é€Ÿ [REST Client](https://marketplace.visualstudio.com/items?itemName=humao.rest-client) ã‚’å…¥ã‚Œã¦å©ã„ã¦ã¿ã¾ã—ãŸã€‚

### 1-2-1. Flaskèµ·å‹•

```sh
$ python api.py 
* Serving Flask app &quot;api&quot; (lazy loading)
* Environment: production
  WARNING: This is a development server. Do not use it in a production deployment.
  Use a production WSGI server instead.
* Debug mode: on
* Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
* Restarting with stat
* Debugger is active!
* Debugger PIN: 111-858-152
```

### 1-2-2. ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
```:call.http
### GET item
GET http://localhost:5000/api/item
```
Cmd + Option + R ã§é€ä¿¡ï¼ã€€ï¼ˆWindows ã¯ Ctl + Alt + Rï¼‰

### 1-2-3. çµæœ

```http:response
HTTP/1.0 200 OK
Content-Type: application/json
Content-Length: 30
Server: Werkzeug/0.16.0 Python/3.7.3
Date: Thu, 03 Oct 2019 16:54:12 GMT

{
  &quot;item_name&quot;: &quot;hogehoge&quot;
}
```

ã‚„ã£ãŸãœã€‚

# 2. API å®Ÿè£…(ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®POST)
GET ã¯ã†ã¾ãã„ã£ãŸã®ã§ POST ã‚‚è©¦ã—ã¦ã¿ã‚ˆã†ã€‚
ã¨ã„ã†ã“ã¨ã§ã¾ãšã¯Flaskã§APIã‚’å®Ÿè£…ã€‚

## 2-1. å®Ÿè£…
```python:api.py
from flask import Flask, jsonify, request
import bleach

app = Flask(__name__)

TOKEN = &apos;YOUR_TOKEN&apos;

@app.route(&apos;/api/v1/user&apos;, methods=[&apos;POST&apos;])
def add_user():
    # check token
    header = request.headers.get(&apos;Authorization&apos;, None)
    _, token = header.split()
    if token != TOKEN:
        return jsonify({&apos;Forbidden&apos;: &apos;Access is denied&apos;}), 403

    # method check
    if request.method != &apos;POST&apos;:
        return jsonify({&apos;Method Not Allowed&apos;: &apos;Method is invalid.&apos;}), 405

    # create new user
    new_user = {}
    for key in request.form.keys():
        new_user[key] = bleach.clean(request.form.get(key))

    return jsonify(new_user)


if __name__ == &apos;__main__&apos;:
    app.run(debug=True)
```
ã“ã‚Œã ã‘ã€‚ã‚„ã£ãŸãœã€‚
ã»ã‚“ã¨ã¯DBã¨ç¹‹ã„ã§ new_user ã‚’ç™»éŒ²ã—ãŸã‚Šã—ãŸã‚“ã§ã™ã‘ã©ã€ä»Šå›ã¯å‰²æ„›ã€‚

Flask ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘å–ã‚‹æ™‚ã¯ **request** ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
ä»Šå›ã¯ Content-Type ã¯ multipart/form-data ã§é€ä¿¡ã™ã‚‹ã¤ã‚‚ã‚Šãªã®ã§ã€request.form ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
ä»–ã«ã‚‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹å ´åˆã¯ request.args ã€json ã‚’å—ã‘å–ã‚‹æ™‚ã¯ request.json ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

## 2-2. å©ã

### 2-2-1. Flaskèµ·å‹•
ã•ã£ãã¨åŒã˜ã‚ˆã†ã«api.pyã‚’å‹•ã‹ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

### 2-2-2. ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
```:call.http
#######
### POST user info
POST http://localhost:5000/api/v1/user
Authorization: Bearer YOUR_TOKEN
Content-Type: multipart/form-data; boundary=HOGEHOGEBOUNDARY

--HOGEHOGEBOUNDARY
Content-Disposition: form-data; name=user_name

SAKAMOTO RYOMA
--HOGEHOGEBOUNDARY
Content-Disposition: form-data; name=user_email

ryoma.sakamoto@...
--HOGEHOGEBOUNDARY--
```
multipart å½¢å¼ã§POSTã™ã‚‹å ´åˆã¯ boundary ã£ã¦ã„ã†ã®ã‚’è¨­å®šã™ã‚‹ã‚“ã§ã€
é€ä¿¡ã™ã‚‹è¦ç´ ã”ã¨ã« **--{your boundary}** ã‚’è¨˜è¿°ã—ã¦ã€
è¦ç´ ã®æœ€å¾Œã¯ **--{your boundary}--** ã§ç· ã‚ããã£ã¨ãã¾ã—ã‚‡ã†ã€‚ 
ã“ã®ã¸ã‚“ã¯[RFC7578](https://tools.ietf.org/html/rfc7578)ã§è¦å®šã•ã‚Œã¦ã„ã¾ã™ã®ã§ã”ç¢ºèªãã ã•ã„ã€‚

**Content-Disposition** ã® name ãŒè¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ãŒã€ã“ã‚Œã¯HTMLã®

```html:html
&lt;form&gt;
 &lt;input name=&quot;user_name&quot;&gt;
&lt;/form&gt;
```
ã¨åŒã˜ã§ã™ã€‚

### 2-2-3. çµæœ
```http:response
HTTP/1.0 200 OK
Content-Type: application/json
Content-Length: 98
Server: Werkzeug/0.16.0 Python/3.7.3
Date: Thu, 03 Oct 2019 17:24:57 GMT

{
  &quot;user_email&quot;: &quot;tesstesstex@...&quot;,
  &quot;user_name&quot;: &quot;Tesstess Tex&quot;
}
```
ã‚„ã£ãŸãœã€‚ç„¡äº‹POSTã§ãã¾ã—ãŸã­ã€‚

# 3. APIã®å®Ÿè£…(ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã®POST)
ã•ã¦ã€ã‚ˆã†ã‚„ãæœ¬é¡Œã§ã™ã€‚

ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±é€ã‚‹ãªã‚‰é¡”å†™çœŸã¨ã‹ã‚‚é€ã‚ŒãŸæ–¹ãŒè‰¯ã„ã‚ˆã­ï¼Ÿãã†ã§ã‚‚ãªã„ã§ã™ã‹ï¼Ÿ
ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®APIã£ã¦å®Ÿè£…ã‚ã‚“ã©ãã•ã„ã‚ˆãªãã¨æ€ã£ã¦ã¾ã—ãŸãŒè¶…ç°¡å˜ã§ã—ãŸï¼
ãã†Flaskã¨REST Clientãªã‚‰ã­ã€‚

## 3-1. å®Ÿè£…

```python:api.py
from flask import Flask, jsonify, request
import bleach

app = Flask(__name__)

TOKEN = &apos;YOUR_TOKEN&apos;


@app.route(&apos;/api/v1/user&apos;, methods=[&apos;POST&apos;])
def add_user():
    # check token
    header = request.headers.get(&apos;Authorization&apos;, None)
    if header is not None:
        _, token = header.split()
        if token != TOKEN:
            return jsonify({&apos;Forbidden&apos;: &apos;Access is denied&apos;}), 403
    else:
        return jsonify({&apos;Forbidden&apos;: &apos;Access is denied&apos;}), 403

    # method check
    if request.method != &apos;POST&apos;:
        return jsonify({&apos;Method Not Allowed&apos;: &apos;Method is invalid.&apos;}), 405

    # create new user
    new_user = {}
    for key in request.form.keys():
        new_user[key] = bleach.clean(request.form.get(key))

    # save uploaded file into data folder
    for file in request.files:
        if file is None:
            break
        upload_file = request.files.get(file)
        upload_path = &apos;data/%s&apos; % upload_file.filename
        upload_file.save(upload_path)
        new_user[file] = upload_file.filename

    return jsonify(new_user)


if __name__ == &apos;__main__&apos;:
    app.run(debug=True)
```
ã“ã‚Œã ã‘ã€‚ã‚„ã£ãŸãœã€‚
Flaskã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å—ã‘å–ã‚‹å ´åˆã€ **request.files** ã®ä¸­ã«å…¥ã£ã¦ã„ãã¾ã™ã€‚

## 3-2. å©ã
### 3-2-1. Flaskèµ·å‹•
ã•ã£ãã¨åŒã˜ã‚ˆã†ã«api.pyã‚’å‹•ã‹ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚
ã¾ãŸã€äº‹å‰ã«é¡”å†™çœŸ face.png ã‚’ api.py ã¨åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç½®ã„ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

### 3-2-2. ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
```:call.http
#######
### OK
POST http://localhost:5000/api/v1/user
Authorization: Bearer YOUR_TOKEN
Content-Type: multipart/form-data; boundary=HOGEHOGEBOUNDARY

--HOGEHOGEBOUNDARY
Content-Disposition: form-data; name=user_name

Tesstess Tex
--HOGEHOGEBOUNDARY
Content-Disposition: form-data; name=user_email

ryoma.sakamoto@...
--HOGEHOGEBOUNDARY
Content-Disposition: form-data; name=&quot;file&quot;; filename=&quot;face.png&quot;
Content-Type: application/octet-stream

&lt; ./face.png
--HOGEHOGEBOUNDARY--
```

### 3-2-3. çµæœ
```http:response
HTTP/1.0 200 OK
Content-Type: application/json
Content-Length: 98
Server: Werkzeug/0.16.0 Python/3.7.3
Date: Thu, 03 Oct 2019 18:01:26 GMT

{
  &quot;file&quot;: &quot;face.png&quot;,
  &quot;user_email&quot;: &quot;tesstesstex@...&quot;,
  &quot;user_name&quot;: &quot;Tesstess Tex&quot;
}
```
dataãƒ•ã‚©ãƒ«ãƒ€ã‚’ã®ãã„ã¦ã¿ã‚‹ã¨ã¡ã‚ƒã‚“ã¨ face.png ãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã—ãŸï¼
&lt;img alt=&quot;ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2019-10-04 3.03.35.png&quot; src=&quot;https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/342105/33e79cd6-9b52-9a30-278c-c6dc3d83e1c8.png&quot;&gt;
ãã…ç–²ã€ã“ã‚Œã«ã¦ç›®çš„é”æˆã§ã™ã€‚ã‚„ã£ãŸãœã€‚

# æ„Ÿæƒ³
ã»ã‚“ã¨Flask ã¯API ã•ãã£ã¨æ›¸ã‘ã¦å„ªç§€ã ãªãã¨æ€ã„ã¾ã™ã€‚
æ™®æ®µã¯APIã¯Node.js ã®node-fetch ã ã£ãŸã‚Šã€Python ã®requests ã ã£ãŸã‚Šã§å©ã„ã¦ã„ã‚‹ã®ã§ã™ãŒã€
curl ã«ã¤ã„ã¦èª¿ã¹ã¦ã„ã‚‹ã¨ãã«REST Clientã«ã¤ã„ã¦çŸ¥ã£ãŸã®ã§ä½¿ã£ã¦ã¿ãŸæ¬¡ç¬¬ã§ã™ã€‚

# å‚è€ƒ
### Qiita
 - [ãƒˆãƒ¼ã‚¯ãƒ³ã‚’åˆ©ç”¨ã—ãŸèªè¨¼ãƒ»èªå¯ API ã‚’å®Ÿè£…ã™ã‚‹ã¨ã Authorization: Bearer ãƒ˜ãƒƒãƒ€ã‚’ä½¿ã£ã¦ã„ã„ã®ã‹èª¿ã¹ãŸ](https://qiita.com/uasi/items/cfb60588daa18c2ec6f5)
 
### Auth0
 - [Python ã¨ Flask ã§ RESTful API ã‚’é–‹ç™ºã™ã‚‹](https://auth0.com/blog/jp-developing-restful-apis-with-python-and-flask/)
</content:encoded></item></channel></rss>
<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[ä¸€èº«ä¸Šã®éƒ½åˆ]]></title><description><![CDATA[ä½œã£ãŸã‚‚ã®ã‹ã‚‰èº«ã®ä¸Šè©±ã¾ã§]]></description><link>https://tesstesstex.vercel.app</link><generator>GatsbyJS</generator><lastBuildDate>Fri, 11 Jun 2021 13:30:03 GMT</lastBuildDate><item><title><![CDATA[YouTube Data API ã§ç™»éŒ²æ¸ˆã¿ãƒãƒ£ãƒ³ãƒãƒ«ã®ä¸­ã‹ã‚‰ãƒ©ã‚¤ãƒ–é…ä¿¡ä¸­ã®ã‚‚ã®ã ã‘å–å¾—ã—ã‚ˆã†ã¨ã—ãŸãŒQuota ã®ä¸Šé™ã«å¼•ã£ã‹ã‹ã£ãŸ]]></title><description><![CDATA[YouTube Data API ã§ä½•ã‹ã‚’ã¤ãã‚‹ã«ã¯Quota åˆ¶é™ã®ã›ã„ã§å®Ÿç”¨çš„ãªã‚‚ã®ã¯é›£ã—ã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚]]></description><link>https://tesstesstex.vercel.appmvs_aydhbjt9</link><guid isPermaLink="false">https://tesstesstex.vercel.appmvs_aydhbjt9</guid><pubDate>Sun, 30 May 2021 11:10:32 GMT</pubDate><content:encoded>YouTube é…ä¿¡é–‹å§‹ã®é€šçŸ¥ã¯Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã®ãƒ¡ãƒ¼ãƒ«ã‹ã€ã‚¹ãƒãƒ›ã¸ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—é€šçŸ¥ã—ã‹ãªã„ã®ã§ã€è‡ªåˆ†ã§API å©ã„ã¦Discord ã¨ã‹ã«é€šçŸ¥é£›ã°ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ã‹ã¨æ€ã„ã¡ã‚‡ã£ã¨ã—ãŸãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚Šã¾ã—ãŸã€‚  


  
ãŒã€ä¸€ã¤å•é¡ŒãŒã‚ã‚ŠGCP ã®YouTube Data API ã¯ä¸€æ—¥10,000 Queries ã¨ã„ã†Quota(å‰²å½“)ä¸Šé™ãŒæ±ºã‚ã‚‰ã‚Œã¦ãŠã‚Šã€ã•ã‚‰ã«ä½¿ç”¨ã™ã‚‹API ã«ã‚ˆã£ã¦Queries ã®ä½¿ç”¨é‡ãŒå®šã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚  
Quota ã«ã¤ã„ã¦ã¯[å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developers.google.com/youtube/v3/determine_quota_cost)ã‚’ã”ç¢ºèªãã ã•ã„ã€‚  
  


ä¾‹ã‚’æŒ™ã’ã‚‹ã¨ã€  
ãƒãƒ£ãƒ³ãƒãƒ«ç™»éŒ²ã«é–¢ã™ã‚‹API ã§ã‚ã‚‹`subscriptions.list` ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯cost ã¯ &lt;b&gt;&quot;1&quot;&lt;/b&gt; ã§ã™ãŒã€   
å‹•ç”»ã‚’æ¤œç´¢ã™ã‚‹`search.list` ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯cost ã¯ &lt;b&gt;&quot;50&quot;&lt;/b&gt; ã‚‚å¿…è¦ã§ã™ã€‚  
  
  

ä»Šå›ã‚„ã‚ŠãŸã‹ã£ãŸã“ã¨ã¯æµã‚Œã¨ã—ã¦ã€  

1. è‡ªåˆ†ã®ç™»éŒ²ãƒãƒ£ãƒ³ãƒãƒ«ã®ID ã‚’å–å¾—ã™ã‚‹  
2. å„ãƒãƒ£ãƒ³ãƒãƒ«ã®é…ä¿¡ä¸­ã®é…ä¿¡ãŒã‚ã‚Œã°ãã‚Œã‚’è¿”ã™  
3. ãã‚Œã‚’Discord ã¨ã‹ã§5åˆ†ãŠã(é…ä¿¡é–‹å§‹ã¯å¤§æŠµã‚­ãƒªã®è‰¯ã„æ™‚é–“ãªã®ã§)ã«é€šçŸ¥ã™ã‚‹  

ã£ã¦æ„Ÿã˜ãªã‚“ã§ã™ãŒã€YouTube Data API ã§ã¯é…ä¿¡ä¸­ã‹ã©ã†ã‹ã®æƒ…å ±ã¯ `videos` ã¾ãŸã¯ `search` ãƒªã‚½ãƒ¼ã‚¹ã§ã—ã‹å–å¾—ã§ãã¾ã›ã‚“ã€‚   
`videos` ã«é–¢ã—ã¦ã¯Channel ID ã‹ã‚‰ã¯å–å¾—ã§ããšã€`search` ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã—ã‹ãªã„ã®ã§ã™ãŒã€  
ç™»éŒ²ãƒãƒ£ãƒ³ãƒãƒ«ãŒ50ã ã£ãŸå ´åˆã€`search` ã®ã‚³ã‚¹ãƒˆ 50 Ã— 50 ã§2,500 Queries ã‚’æ¶ˆè²»ã—ã¦ã—ã¾ã†ã®ã§èª²é‡‘ã™ã‚‹ä»–æ–¹æ³•ãŒãªã„ã‚ˆã†ã§ã™ã€‚  
Quota ä¸Šé™ã®é–‹æ”¾ã«é–¢ã—ã¦ã¯[å€‹äººã ã¨é›£ã—ã„ã¿ãŸã„](https://stackoverflow.com/questions/61281991/applying-for-additional-quota-for-youtube-api-as-an-individual-without-business/62686472#62686472)ãªã®ã§ã€ç™½æ——ã§ã™ã€‚  


### ä¸€å¿œä½œã£ãŸã‚‚ã®ã¯ã“ã¡ã‚‰  
[tesstesstex/stream_now](https://github.com/tesstesstex/stream_now)


</content:encoded></item><item><title><![CDATA[Vue CLI ã§GoogleAppsScript ã‚¢ãƒ—ãƒª ã‚’ä½œæˆã™ã‚‹ã¾ã§]]></title><description><![CDATA[Vue CLI ã‚’ä½¿ç”¨ã—ãŸSPA ã‚’Webpack ã§ãªã‚“ã¨ã‹GAS ä¸Šã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹ã‚ˆã†ã«ãªã‚‰ãªã„ã‹ã‚„ã£ã¦ã¿ãŸ ]]></description><link>https://tesstesstex.vercel.appUZl-L_vYqclV</link><guid isPermaLink="false">https://tesstesstex.vercel.appUZl-L_vYqclV</guid><pubDate>Mon, 01 Feb 2021 19:10:32 GMT</pubDate><content:encoded># VueCLI4 ã§GoogleAppsScript ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹

GoogleAppsScript (ä»¥ä¸‹GAS) ã§ç°¡æ˜“ãªWeb ã‚µã‚¤ãƒˆã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒä½œæˆã§ãã‚‹ã®ã§ã™ãŒã€  
ãã‚Œã‚’VueCLI ã‚’ç”¨ã„ã¦ä½œæˆã—ã¦ã¿ã¾ã—ãŸã€‚  

## Vue CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Vue.js ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç°¡å˜ã«ä½œã‚‹ãŸã‚ã®CLI ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹Vue CLI ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚  
Vue CLI ã¯global install ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§æ³¨æ„ã€‚  

ãªãŠnpm ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯é©å®œèª­ã¿æ›¿ãˆã¦ãã ã•ã„ã€‚  
```
$ yarn global add @vue/cli @vue/cli-init
yarn global v1.22.10
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
success Installed &quot;@vue/cli@4.5.11&quot; with binaries:
      - vue
âœ¨  Done in 197.86s.

$ vue --version
@vue/cli 4.5.11
```
* vue ãŒå‹•ã‹ãªã„å ´åˆã¯ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã®ãƒ‘ã‚¹ãŒé€šã£ã¦ã„ãªã„ã¨æ€ã‚ã‚Œã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ã‚°ã‚°ã£ã¦ã¿ã¦ãã ã•ã„ã€‚  


## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã«ã™ã¹ã¦ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒå…¥ã‚Šã¾ã™ã€‚  

```
$ vue create &lt;appname&gt;
* ã“ã“ã§ã¯appname ã¯&quot;vue-gas-app&quot; ã¨ã—ã¾ã™ã€‚
** ãŠãã‚‰ãself singed certificate ã«é–¢ã™ã‚‹ã‚¨ãƒ©ãƒ¼ãŒç”Ÿã˜ã‚‹ã®ã§ã€Global Protect ã‚’ä¸€æ™‚çš„ã«åˆ‡æ–­ã—ã¾ã—ã‚‡ã†ã€‚
*** çµ‚äº†å¾Œå†æ¥ç¶šã™ã‚‹ã®ã‚’å¿˜ã‚Œãšã«ã€‚
```

å®Ÿè¡Œå¾Œã€ä»¥ä¸‹ã®åˆæœŸè¨­å®šç”¨ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚Šã¾ã™ã€‚  
ä»Šå›ã¯è©¦ã—ã«Manual ã§è¨­å®šã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ 
```
Vue CLI v4.5.11
? Please pick a preset: (Use arrow keys)
  Default ([Vue 2] babel, eslint)
  Default (Vue 3 Preview) ([Vue 3] babel, eslint)
â¯Manually select features
```

```
? Check the features needed for your project: (Press &lt;space&gt; to select, &lt;a&gt; to toggle all, &lt;i&gt; to invert selection)
â¯â—‰ Choose Vue version
 â—‰ Babel
 â—¯ TypeScript
 â—¯ Progressive Web App (PWA) Support
 â—¯ Router
 â—¯ Vuex
 â—¯ CSS Pre-processors
 â—‰ Linter / Formatter
 â—¯ Unit Testing
 â—¯ E2E Testing
```

```
? Choose a version of Vue.js that you want to start the project with
â¯ 2.x
  3.x (Preview)
```

```
? Pick a linter / formatter config:
  ESLint with error prevention only
  ESLint + Airbnb config
  ESLint + Standard config
â¯ ESLint + Prettier
```

```
? Pick additional lint features: (Press &lt;space&gt; to select, &lt;a&gt; to toggle all, &lt;i&gt; to invert selection)
â¯â—‰ Lint on save
 â—¯ Lint and fix on commit
```

```
? Where do you prefer placing config for Babel, ESLint, etc.? (Use arrow keys)
â¯ In dedicated config files
  In package.json
```

```
? Save this as a preset for future projects? (y/N) n
```

```
? Pick the package manager to use when installing dependencies: (Use arrow keys)
â¯ Use Yarn
  Use NPM
```

```
âœ¨  Creating project in /Users/user/work/vue-gas-app.
ğŸ—ƒ  Initializing git repository...
âš™ï¸  Installing CLI plugins. This might take a while...

yarn install v1.22.10
info No lockfile found.
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
success Saved lockfile.
âœ¨  Done in 123.97s.
ğŸš€  Invoking generators...
ğŸ“¦  Installing additional dependencies...

yarn install v1.22.10
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...

success Saved lockfile.
âœ¨  Done in 20.69s.
âš“  Running completion hooks...

ğŸ“„  Generating README.md...

ğŸ‰  Successfully created project vue-gas-app.
ğŸ‘‰  Get started with the following commands:

 $ cd vue-gas-app
 $ yarn serve
```

ä»Šå›ã¯VueCLI ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ“ãƒ¥ãƒ¼ã®ã¿ã®ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ã®ã§ã€Vue Router ã‚„Vuex ã¯ä½¿ç”¨ã—ãªã„ã‚‚ã®ã¨ã—ã¾ã™ã€‚    
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã‚‰è©¦ã—ã«ä¸€åº¦å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚    

```
$ cd vue-app-demo

$ yarn serve
```

## GoogleAppsScript ã®ç”¨æ„

ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰Google Apps Script API ã‚’ï½¢ã‚ªãƒ³ï½£ã«ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚  
https://script.google.com/u/1/home/usersettings  

GAS ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯clasp ã¨ã„ã†CUI ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã¨åŒæœŸã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚  

```
$ yarn global add @google/clasp

$ clasp login

$ clasp create vue-gas-app
? Create which script?
  standalone
  docs
  sheets
  slides
  forms
â¯ webapp
  api
```

```
Created new webapp script: https://script.google.com/d/&lt;id&gt;/edit
Warning: files in subfolder are not accounted for unless you set a &apos;.claspignore&apos; file.
Cloned 1 file.
â””â”€ appsscript.json
```

ã“ã“ã§æ–°ãŸã«appsscript.json ã¨.clasp.json ãŒä½œæˆã•ã‚Œã¾ã™ã€‚  
æœ€çµ‚çš„ã«GAS ã¸ã¯`clasp push` ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã§dist/ å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã®ã§ã™ãŒã€  
dist/ å†…ã«appsscript.json ã‚„Code.js ã‚’é…ç½®ã™ã‚‹ã“ã¨ã‚’é¿ã‘ã‚‹ãŸã‚ã«ã€gas/ ã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚  

```
$ mkdir gas

$ mv appsscript.json gas/

$ echo .clasp.json &gt;&gt; .gitignore
```

ã¾ãŸgas/ å†…ã«GAS ã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã¨ãªã‚‹Code.js ã‚’ä½œæˆã—ã¾ã™ã€‚  

```javascript
# Code.js
function doGet() {
  return getHtml()
}
function getHtml() {
  const html = HtmlService.createTemplateFromFile(&apos;index&apos;)
  return html
    .evaluate()
    .setTitle(&apos;vue-gas-app&apos;)
    .addMetaTag(&apos;viewport&apos;, &apos;width=device-width, initial-scale=1&apos;)
}
```

dist/ å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’GAS ã¸push ã™ã‚‹ãŸã‚ã«.clasp.json ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã™ã€‚  

```json
{
  &quot;scriptId&quot;:&quot;&lt;id&gt;&quot;,
  &quot;rootDir&quot;: &quot;dist&quot;
}
```

## ãƒ“ãƒ«ãƒ‰ã®è¨­å®š

ä½œæˆã—ãŸgas/ å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ“ãƒ«ãƒ‰ã®éš›ã«dist/ ã«ã‚³ãƒ”ãƒ¼ã—ã¦ãã‚Œã‚‹ã‚ˆã†ã«ã€webpack ã®è¨­å®šã‚’ã—ã¾ã™ã€‚  
VueCLI ã§ã¯å¾“æ¥ã®ã‚ˆã†ã«webpack.config.js ã«è¨­å®šã™ã‚‹ã®ã§ã¯ãªãã€vue.config.js å†…ã«è¨˜è¿°ã—ã¾ã™ã€‚  

```javascript
# vue.config.js
const CopyWebpackPlugin = require(&apos;copy-webpack-plugin&apos;)

module.exports = {
  configureWebpack: {
    plugins: [
      new CopyWebpackPlugin([
        {
          from: path.resolve(__dirname, &apos;./gas&apos;),
          ignore: [&apos;.*&apos;]
        }
      ])
    ]
  }
};
```

ã¾ãŸã€VueCLI ã®é€šå¸¸ã®ãƒãƒ³ãƒ‰ãƒ«ã§ã¯GAS ã§ã¯èª­ã¿è¾¼ã‚ãªã„å ´åˆãŒã‚ã‚‹ãŸã‚ã€ã™ã¹ã¦ã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã§ãƒãƒ³ãƒ‰ãƒ«ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚

```javascript
# vue.config.js
const path = require(&apos;path&apos;)
const CopyWebpackPlugin = require(&apos;copy-webpack-plugin&apos;)
const HtmlWebpackInlineSourcePlugin = require(&apos;html-webpack-inline-source-plugin&apos;)

module.exports = {
  publicPath: &apos;/public&apos;,
  chainWebpack: config =&gt; {
    config
      .plugin(&apos;html&apos;)
      .tap(args =&gt; {
        args[0].template = &apos;./public/index.html&apos;
        args[0].inlineSource = &apos;.(vue|js|css)&apos;
        return args
      })
  },
  configureWebpack: {
    plugins: [
      new HtmlWebpackInlineSourcePlugin(),
      new CopyWebpackPlugin([
        {
          from: path.resolve(__dirname, &apos;./gas&apos;),
          ignore: [&apos;.*&apos;]
        }
      ])
    ]
  }
};
```

## deploy

ã§ã¯å®Ÿéš›ã«ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚  

```
$ yarn build
```

ãƒ“ãƒ«ãƒ‰ã—ãŸã‚‚ã®ã‚’clasp push ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚  
ã¾ãŸã€ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œãªã„ã‚ˆã†ã«äº‹å‰ã«.claspignore ã‚’è¨­å®šã—ã¾ã™ã€‚  

```
/* .claspignore */
**/**
static/**
static/css/**
!appsscript.json
!Code.js
!index.html
```

```
$ clasp push
```

ã“ã‚Œã§GAS ã®ç”»é¢ã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚Œã°OKã§ã™ã€‚

## Appendix

### Linter ã¨Formatter

Linting rules ã«é–¢ã—ã¦ã¯å¥½ã¿ãŒåˆ†ã‹ã‚Œã¾ã™ãŒã€ã“ã“ã§ã¯æ¨™æº–çš„ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹Prettier ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã«ä½¿ç”¨ã—ã¾ã™ã€‚  
VueCLI ã‚’ä½¿ç”¨ã—ã¦ESLint + Prettier ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«ESLint ã¨Prettier ã§ç«¶åˆã™ã‚‹ãƒ«ãƒ¼ãƒ«ã‚’ã‚ªãƒ•ã«ã—ã¦ãã‚Œã‚‹`eslint-config-prettier` ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã®ã§ã€åŸºæœ¬çš„ã«ã¯è‡ªåˆ†ã§ç‰¹ã«ãƒ«ãƒ¼ãƒ«ã‚’ã„ã˜ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚  
ç§ã®å ´åˆã¯ .prettierrc.js ã«ã¦ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã®ã¿æœ‰åŠ¹ã«ã—ã¦ã‚ã‚Šã¾ã™ã€‚  

```javascript
# .prettierrc.js
module.exports = {
  singleQuote: true,
};
```
</content:encoded></item><item><title><![CDATA[Hangouts Chatã®é›¨é€šçŸ¥botã‚’çˆ†é€Ÿã§ä½œã‚‹]]></title><description><![CDATA[Google Chat (æ—§å: Hangouts Chat) ã®bot ã‚’ç°¡å˜ã«ä½œã‚‹æ–¹æ³•]]></description><link>https://tesstesstex.vercel.app2OsBWeOpgTBV</link><guid isPermaLink="false">https://tesstesstex.vercel.app2OsBWeOpgTBV</guid><pubDate>Thu, 26 Mar 2020 03:15:00 GMT</pubDate><content:encoded>**:warning:ã“ã®è¨˜äº‹ã¯2019/12/06 ã«Qiita ã«æŠ•ç¨¿ã—ãŸã‚‚ã®ã§ã™**

@murs313 ã•ã‚“ã®[Slackã®é›¨é€šçŸ¥botã‚’çˆ†é€Ÿã§ä½œã‚‹ã€ãƒ¡ãƒƒâ—â—ã€‘](https://qiita.com/murs13/items/abc2b124d53e2ed54a02)ã‚’èª­ã¿ã€
æ—©é€ŸåŒã˜ç‰©ã‚’ä½œã‚ã†ã¨æ€ã„ã¾ã—ãŸãŒã€å¼Šç¤¾ã¯SlackãŒä½¿ãˆã¾ã›ã‚“ã§ã—ãŸã€‚

ã¨ã„ã†ã‚ã‘ã§**Hangouts Chatç‰ˆ**é›¨é€šçŸ¥botã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚
GASã ã¨çœŸä¼¼ã—ã™ãã§ä½œã£ã¦ã¦ã¤ã¾ã‚‰ãªã„ã®ã§Pythonã¨cronã§å®Ÿè£…ã—ã¦ã¿ã¾ã—ãŸã€‚

â€» ãªãŠHangouts Chatã¯G Suiteã§ã®ã¿ä½¿ç”¨ã§ãã€å€‹äººã®Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã¯ç¾åœ¨ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚

# ã¤ãã£ãŸã‚‚ã®
ãƒ†ã‚¹ãƒˆã§é€ä¿¡ã—ã¦ã¿ãŸã‚‚ã®ãŒã“ã¡ã‚‰ã€‚
å®Ÿéš›ã¯æ™‚é–“ã‚’åˆã‚ã›ã¦17:00ã«é€ä¿¡ã•ã‚Œã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ã„ã¾ã™ã€‚
![IMG_0068.jpg](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/342105/da93ccdf-2a24-c9dc-4b94-eb48a3689152.jpeg)
Hangouts Chatã¯Markdownã£ã½ã„è¨˜æ³•ãŒä½¿ãˆã‚‹ã®ãŒè‰¯ã„ã§ã™ã­ã€‚
ï¼ˆç”»åƒã§ã¯å¼·èª¿è¡¨ç¤ºãŒã†ã¾ã„ã“ã¨ã„ã£ã¦ã¾ã›ã‚“ãŒâ€¦â€¦ï¼‰

# ã¤ã‹ã£ãŸã‚‚ã®
- **CentOS 8**  
  cronã§å®šæœŸå®Ÿè¡Œã—ã¾ã™ã€‚
- **Python 3.6.8**  
- **Hangouts Chat ã® incoming webhook**
- **[livedoorãŠå¤©æ°—API](http://weather.livedoor.com/weather_hacks/webservice)**

# Hangouts Chatã¸ã®POST
Hangouts Chat ã¯ incoming webhook ãŒä½¿ç”¨ã§ãã¾ã™ã€‚
@iitenkida7 ã•ã‚“ã® [[è¶…ç°¡å˜]Hangouts Chat ã® incoming webhooks ã‚’ä½¿ã£ã¦APIã‹ã‚‰ç°¡å˜ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æŠ•ç¨¿ã™ã‚‹](https://qiita.com/iitenkida7/items/3c8f9f8f6ee1e809558d)ã‚’å‚è€ƒã«ã•ã›ã¦é ‚ãã¾ã—ãŸã€‚

# Pythonã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
```python:weather.py
import requests

weather_url = &apos;http://weather.livedoor.com/forecast/webservice/json/v1?city=130010&apos; # Tokyo
resp = requests.get(weather_url)
data = resp.json()

# ä¸€éƒ¨ã¼ã‹ã—ã¦ã„ã¾ã™ãŒã‚³ãƒ”ãƒšã§ãŠk
webhook_url = &quot;https://chat.googleapis.com/v1/spaces/HOGEHOGE/messages?key={YOUR_KEY}&amp;token={YOUR_TOKEN}&quot; 

tomorrow_weather = data[&apos;forecasts&apos;][1]
telop = tomorrow_weather[&apos;telop&apos;]
max_temp = tomorrow_weather[&apos;temperature&apos;][&apos;max&apos;]
min_temp = tomorrow_weather[&apos;temperature&apos;][&apos;min&apos;]
image = tomorrow_weather[&apos;image&apos;][&apos;url&apos;]

text = &apos;&apos;
text += &apos;æ˜æ—¥ã®å¤©æ°—ã¯&apos;
text += &apos;*&apos; + telop + &apos;*&apos;
text += &apos;ã§ã™ã€‚\n&apos;
# ãªãœã‹maxã¨minãŒæ™‚ã€…å–å¾—ã§ããªã„
if max_temp is not None:
    text += &apos;æœ€é«˜æ°—æ¸©&apos;
    text += max_temp.get(&apos;celsius&apos;)
    text += &apos;â„ƒ&apos;
if min_temp is not None:
    text += &apos;/æœ€ä½æ°—æ¸©&apos;
    text += min_temp.get(&apos;celsius&apos;)
    text += &apos;â„ƒ\n&apos;
text += image

content = {&quot;text&quot;: text}
response = requests.post(webhook_url, json=content)
```

# cronã®è¨­å®š
cronã®è¨­å®šã¯[ã“ã¡ã‚‰](https://eng-entrance.com/linux-command-crontab)ãŒå‚è€ƒã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚

cronã®è¨­å®šã‚’è¡Œã†ã«ã¯```crontab -e```ã‚’å©ãã¾ã—ã‚‡ã†ã€‚

```sh
$ crontab -e
```

ã™ã‚‹ã¨Vimã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒé–‹ãã®ã§ã€å®Ÿè¡Œã™ã‚‹æ™‚é–“ã¨å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¾ã—ã‚‡ã†ã€‚
ä»Šå›ã¯ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›´ä¸‹ã«ç½®ã„ãŸã¨ã„ã†è¨­å®šã§ã™ã€‚

```vim
0 17 * * * python3 ~/weather.py
```

ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã—ã¦Vimã‚’é–‰ã˜ãŸæ™‚ã«```crontab: installing new crontab```ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°è¨­å®šå®Œäº†ã§ã™ã€‚

å‹•ä½œç¢ºèªã™ã‚‹å ´åˆã¯ã€å†åº¦```crontab -e```ã‚’é–‹ãã€

```vim
*/1 * * * * python3 ~/weather.py
```

ã®ã‚ˆã†ã«è¨˜è¿°ã™ã‚Œã°1åˆ†ãŠãã«ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

# æ„Ÿæƒ³
å‚è€ƒã«ã•ã›ã¦ã„ãŸã ã„ãŸãƒªãƒ³ã‚¯ãŒã‚ã‹ã‚Šã‚„ã™ã‹ã£ãŸã®ã§ç‰¹ã«è©°ã¾ã‚‹ã“ã¨ãªãè¨­å®šã§ãã¾ã—ãŸã€‚
</content:encoded></item></channel></rss>